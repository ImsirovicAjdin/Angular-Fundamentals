
<div class="row" *ngFor="let session of visibleSessions">
    <div class="col-md-1">
        <upvote (vote)="toggleVote(session)" [count]="session.voters.length" [voted]="userHasVoted(session)"></upvote>
    </div>
    <div class="col-md-10">
        <collapsible-well>
            <div well-title>
                {{session.name}}
                <i *ngIf="session.voters.length > 3" class="glyphicon glyphicon-fire" style="color:red"></i>
            </div>
            <div well-body>
                <h6>{{session.presenter}}</h6>
                <span>Duration: {{session.duration | duration }}</span><br>
                <span>Level: {{session.level}}</span>
                
                <p>{{session.abstract}}</p>
            </div>
        </collapsible-well>
    </div>
</div>
<!--
13.02 Creating a Voting Component
Our modal dialog box is now complete. We've got a fair amount of functionality with it. It's very stable, it does what we need it to do and it's quite versatile. So we're going to turn our attention to a new component. We're going to implement the functionality of voting on sessions. Here in the details page for an event, we have a list of sessions. Off to the left we'd like to put a little voting icon that lets people vote for a session to indicate that they like it. So we're going to go to our code and we're going to go into the session list component inside of events into the HTML. And we've got this div that is a column of 10 out of 12 sections wide. We're going to add a new one. We're going to add a div with a class of col, size medium, we'll just make this one 1. And inside of here, we're going to put our voting component. I'm going to call this component upvote. And this upvote component is going to need three things. We're going to have to tell it one, how many votes the current session has, two, whether or not the current user has voted, and finally we need to know when the user actually clicks on the voting component to vote. So we're going to need to listen to a vote event. We'll call a method toggleVote because we want the user to be able to click to vote, and if they've already voted, they can click again to unvote. And we'll pass in the current session so that we know which session they're voting for, and that matches this variable here. We've also got to give it a count of the current votes, and we access that from session dot voters dot length. And then we need to tell it whether or not the user has voted. We'll call our method userHasVoted, passing in the current session. And that will return out whether the current user has voted. There's just not a very easy way to determine whether the current user has voted, so it's much easier to call a method to determine that. And then we'll close this up. So, there's our upvote component HTML. Let's go ahead and create that component. So I'll create a new file, it'll be called upvote dot component ts. And we're going to need a few things from angular core. Of course we need Component. Since it's got an even that it raises, we're going to need the EventEmitter. We've got two input properties, so we need Input, and that event that it raises is an output property, so we've got to import Output. Now we can create our Component, which has a selector of upvote and its template will look something like this. We'll start off with a div, it has a class. We'll put in some styling classes, votingWidgetContainer and pointable so that the mouse is a pointer when we hover over it. And we want to know when they click on this div so we're going to add a click event and we're just going to call onClick. And inside of that div we have another div with a class of well and we'll add a votingWidget class, that'll be used for styling. Inside of that another div with a class of votingButton and this will be the display inside of here we're just going to put a couple of glyph icons. And one if they have voted, which will be the heart icon, so we'll add the ngIf, and if they voted then the class will be glyphicon and will be the heart. And then again another icon and this one if they haven't voted, and the class is also glyphicon and this one is glyphicon heart empty. And then after the voting button itself, we're going to need to show the count, so I've got another div, another class of badge and badge inverse, these are bootstrap classes, and we'll also give it our own custom class, voting count. We'll close that up, close up our other div. And now we can create our component class. It's to be called upvoteComponent. And we have those two input properties, count, which is a number, and voted, which is a boolean, and we have one output event, which is named vote. And that will be a new EventEmitter. And the only other thing we need to do is implement the onClick method, in which case we're going to emit the vote event and we don't need to give any data, so we'll just pass out an empty object. All right, our component's implemented, we've actually got to style this up quite a bit in order for this to look decently. So I've already created a bunch of CSS to handle this and I'm just going to create a styleUrls property and that'll point to app events event details upvote dot component dot css. And let's create that file. And I'm just going to paste in a bunch of CSS that will style this correctly. You can look through here and copy the CSS that I've pasted in here, or you can just grab this file from the github repo. And that will style your element up correctly. So I'll save that change, and I'll go into the index file and add that new component. We'll go into our module and import the component and also add it to the list of components for the module. Of course, I do need to save my changes to the index file. And if we try to run this, it's going to error out because we haven't gone into our session list and implemented this toggleVote method or this userHasVoted method. Those aren't implemented yet inside of our session list but we'll implement those next.

-->