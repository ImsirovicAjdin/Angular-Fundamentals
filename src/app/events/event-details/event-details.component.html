<div class="container">
  <img [src]="event?.imageUrl" [alt]="event?.name" class="event-image">

  <div class="row">
    <div class="col-md-11">
      <h2>{{event?.name | uppercase }} </h2>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div><strong>Date:</strong> {{event?.date | date:'short' }}</div>
      <div><strong>Date:</strong> {{event?.date | date:'shortDate' }}</div>
      <div><strong>Date:</strong> {{event?.date | date:'y/M/d' }}</div>
      <div><strong>Time:</strong> {{event?.time}}</div>
      <div><strong>Price:</strong> ${{event?.price}}</div>
    </div>
    <div class="col-md-6">
      <address>
        <strong>Address:</strong><br />
        {{event?.location?.address}}<br />
        {{event?.location?.city}}, {{event?.location?.country}}
      </address>
    </div>
  </div>

  <hr>

  <div class="row" style="margin-bottom:10px">
    <div class="col-md-2">
      <h3 style="margin:0">Sessions</h3>
    </div>
    <div class="col-md-7">
      <div class="btn-group btn-group-sm" style="margin-right:20px; margin-left:20px">
        <button class="btn btn-default" [class.active]="sortBy==='name'" (click)="sortBy='name'">
          By Name
        </button>
        <button class="btn btn-default" [class.active]="sortBy==='votes'" (click)="sortBy='votes'">
          By Votes
        </button>
      </div>

      <div class="btn-group btn-group-sm">
        <button class="btn btn-default" [class.active]="filterBy==='all'" (click)="filterBy='all'">All</button>
        <button class="btn btn-default" [class.active]="filterBy==='beginner'" (click)="filterBy='beginner'">Beginner</button>
        <button class="btn btn-default" [class.active]="filterBy==='intermediate'" (click)="filterBy='intermediate'">Intermediate</button>
        <button class="btn btn-default" [class.active]="filterBy==='advanced'" (click)="filterBy='advanced'">Advanced</button>
      </div>
    </div>
    <div class="col-md-2">
      <a (click)="addSession()">Add Session</a>
    </div>
  </div>

  <session-list [sortBy]="sortBy" [filterBy]="filterBy" *ngIf="!addMode" [sessions]="event?.sessions"></session-list>
  <create-session *ngIf="addMode" (saveNewSession)="saveNewSession($event)" (cancelAddSession)="cancelAddSession()"></create-session>
</div>

<!--
10.07 Sorting Data
Now that we've got filtering implemented, let's add sorting functionality. I want to add sorting pretty much the same way we added filtering with a couple of buttons. I'm going to put a couple of buttons right here to the left of our existing buttons, and one will be for sorting by votes, and the other one will be for sorting by the name. Those seem like the two most logical was that users might want to view sessions is either by name in alphabetical order, or by vote to see the highest voted sessions first. Now if I'm going to add these buttons, I could already see that I might have a space problem. These buttons here are kind of big, and they're taking up a lot of space, so to add more buttons over to the left as these slide over is going to make this whole thing seem a little bit crowded. So let's make a small visual change. I want to take all of these buttons, and I want to wrap them into a button group. And we'll go with a small group of buttons, so btn dash group dash sm. Refresh our change and that's much more manageable. So let's add the exact same thing, a button group. Again, we want to set the active property, so we're going to bind to class. active, and instead of filtering, we're going to be sorting, so we'll have a sortBy property and we're going to have two potential values, names. So we just use name. And then, that button will be By Name. We also need a click event. And our click event will just set our sortBy property, which doesn't exist yet to the value of name. And we'll need a second button, and this one won't be by name, it'll be by votes. These will be again, magic values, so we got those buttons created. Let's go back and look at our visual display and see if it looks okay. All right, there's just not enough space in between these two groups of buttons, so let's add a little extra space. I'm going to set the right margin to be 20 pixels, and, I think I might want to move it a little bit more to the right as well, so I'll set a left margin as well, of 20 pixels. And let's see how that looks. All right, that's fine. Back to our code. Now that we've got our sortBy property set, we've got to implement that and the code behind. So we just need to set a sortBy property, which is also a string, and we'll default that to votes. And of course we have to pass that into our sessions-list. component. And we'll pass in our sortBy value. And now we can go to our session-list. component, and add this new input property sortBy. So in our ngOnChanges event, after we filter the sessions, let's also sort them. So let's just check and say, all right, does this. sortBy equal the value name, and if it does, then we're going to sort our sessions by name. So again, an array has a nice method already on it called sort. And this is a mutating method, it doesn't create a new copy of the array and leave the original array unsorted, it actually sorts the array in place, which is what we want. But you have to pass in a comparison function. So rather than doing that in line, I'm going to create a new comparison function, and I'll name that sortByNameAsc, and then of course I want to worry about if the value is not named, which means it must be votes, then we'll do the same thing calling the sort method, but this time we'll pass in a different function which we sortByVotesDesc. So that'll be descending sort. Put a semicolon there, and we need to implement these two functions and I'm just going to implement them outside of the components class because they're just sorting functions, they're stateless functions. They don't actually need to be methods of the class. So our sortByName, will take in two parameters., the first session, which is an Isession, and the second session, and it has to compare those two sessions, so if the first session's name is before alphabetically, the second session's name, then we'll return one. Else if the first sessions name is the same as the second session's name then return zero and otherwise we're just going to return negative one, meaning that the second session's name is before the first session's name. This just compares any give two values and tells the array's sorting method how those two values should be in relationship to each other. And our votes sorter is going to be very similar. First session and a second session. And in this case, this is a lot simpler. The way that votes work, is there's a voter's array, so for example, the session s1 has a voter's array, and it's length property is the number of votes. So we can actually very easily compare two different sessions' number of votes by subtracting them, and since we want a descending sort, we're going to return the s2. voters. length minus the s1. voters. length. So if they're the same, if they both have the same number of votes, the second one minus the first one is going to be zero. If the second one has more votes, then it's going to be a positive number. And if it has less votes, it's going to be a negative number, and that's how the sorting functions work. So let's save that, and refresh. And now we're by default, sorting by votes. You can see the session that's on fire is first, and that must be the one with the highest number of votes. If you click the name sorting, then we get an alphabetical sorting of the sessions by their name. A's come before B's. And can go back to votes. And there we go, we've implemented sorting. Again, just like with filtering, just up to us as to where we feel like the functionality belongs. There's a homework assignment for this section, so if you want to, feel free to do that now.


-->